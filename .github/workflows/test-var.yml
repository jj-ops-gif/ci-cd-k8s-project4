name: Test Variables
on: push
env:
  mascot: Mona
  super_duper_var: totally_awesome

jobs:
  windows_job:
    runs-on: windows-latest
    environment: production
    steps:
      - run: echo 'Hi ${{ env.mascot }} ${{ vars.REACT_APP_MOVIE_API_URL }}'  # Hi Mona
      - run: echo 'Hi ${{ env.mascot }}'  # Hi Octocat
        env:
          mascot: Octocat
  linux_job:
    runs-on: ubuntu-latest
    environment: production
    env:
      mascot: Tux
    steps:
      - run: |
            echo 'Hi ${{ env.mascot }} - ${{ vars.REACT_APP_MOVIE_API_URL }}'  # Hi Tux
            echo "$ALLMYSECRETS"
            echo "$ALLMYVARS"
            echo "REACT_APP_MOVIE_API_URL=http://127.0.0.1:3000" >> $GITHUB_ENV
        shell: bash
        env:
            ALLMYSECRETS: ${{ toJSON(secrets) }}
            ALLMYVARS: ${{ toJSON(vars) }}
      - name: Test
        run: |
            echo 'New value - $REACT_APP_MOVIE_API_URL'
            echo 'Hello - ${{ vars.REACT_APP_MOVIE_API_URL }}'